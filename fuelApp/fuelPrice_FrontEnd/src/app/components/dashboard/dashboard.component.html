<div class="outer">

  <nav class="navbar navbar-expand text-bg-success" style="height: 80px; z-index: 1000">
    <div class="container">
      <a href="#" class="navbar-brand text-bg-success">
        <h1 style="margin: 0;">Greenpoint Fuel</h1>
      </a>

      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link mt-0 w-100">
            <h1 style="margin: 0; color: white; font-weight: normal;">User | </h1>
          </a>
        </li>
        <li class="nav-item">
          <a href="javascript:void(0);" (click)="logout()" class="btn btn-light mt-0 w-100">
            <h3 style="margin: 0;">Logout</h3>
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container-fluid border-primary">
    <div class="row">

      <div class="col-2">
        <nav id="sidebarMenu" class="collapse d-lg-block sidebar collapse bg-white border border-success">
          <div class="position-sticky">
            <div class="list-group list-group-flush mx-3 mt-3">
              <a href="javascript:void(0);"
                class="list-group-item list-group-item-action h5 border border-success rounded text-bg-success"
                aria-disabled="true" (click)="hideTable(0)">
                <span class="align-middle"><mat-icon>person_outline</mat-icon> </span> My Account</a>
              <a href="javascript:void(0);"
                class="list-group-item list-group-item-action h5 border border-success rounded text-bg-success mt-1"
                (click)="hideTable(1)"><span class="align-middle"><mat-icon>attach_money</mat-icon> </span> Quote -
                Request</a>
              <a href="javascript:void(0);"
                class="list-group-item list-group-item-action h5 border border-success rounded text-bg-success mt-1"
                (click)="hideTable(2)"><span class="align-middle"><mat-icon>timeline</mat-icon> </span> Quote -
                History</a>
              <a href="javascript:void(0);" (click)="logout()"
                class="list-group-item list-group-item-action h5 border border-success rounded text-bg-success mt-1"
                aria-disabled="true"><span class="align-middle"><mat-icon>exit_to_app</mat-icon> </span> Logout</a>

            </div>
          </div>
        </nav>

      </div>

      <div class="col-10">
        <div>
          <div class="panelDash bg-white border border-success table-responsive-sm">



            <form class="row g-2 p-2" [formGroup]="dashboardForm" *ngIf="userAccount">
              <div class="col-12 d-flex justify-content-between align-items-center">
                <h1 class="text-decoration-underline">My Account</h1>
                <button (click)="refreshProfileUpdate()" type="submit" class="btn btn-success">Update
                  Profile</button>
              </div>

              <div class="col-md-6"
                [class.error]="dashboardForm.controls['firstName'].dirty && dashboardForm.hasError('required', 'firstName')">

                <label for="firstName" class="form-label d-flex justify-content-between">First Name <small
                    *ngIf="dashboardForm.controls['firstName'].dirty && dashboardForm.hasError('required', 'firstName')"
                    class="text-danger">*First Name is required</small></label>
                <input type="text" class="form-control border border-success" id="firstName" formControlName="firstName"
                  maxlength="25">

              </div>

              <div class="col-md-6"
                [class.error]="dashboardForm.controls['lastName'].dirty && dashboardForm.hasError('required', 'lastName')">
                <label for="lastName" class="form-label d-flex justify-content-between">Last Name <small
                    *ngIf="dashboardForm.controls['lastName'].dirty && dashboardForm.hasError('required', 'lastName')"
                    class="text-danger">*Last Name is required</small></label>
                <input type="text" class="form-control border border-success" formControlName="lastName" id="lastName"
                  maxlength="25">

              </div>

              <div class="col-12"
                [class.error]="dashboardForm.controls['addressOne'].dirty && dashboardForm.hasError('required', 'addressOne')">
                <label for="inputAddress1" class="form-label d-flex justify-content-between">Address 1 <small
                    *ngIf="dashboardForm.controls['addressOne'].dirty && dashboardForm.hasError('required', 'addressOne')"
                    class="text-danger">*Address One is required</small></label>
                <input type="text" formControlName="addressOne" class="form-control border border-success"
                  id="inputAddress1" maxlength="100">

              </div>

              <div class="col-12">
                <label for="inputAddress2" class="form-label">Address 2</label>
                <input type="text" formControlName="addressTwo" class="form-control" id="inputAddress2" maxlength="100">
              </div>

              <div class="col-md-6"
                [class.error]="dashboardForm.controls['city'].dirty && dashboardForm.hasError('required', 'city')">
                <label for="inputCity" class="form-label d-flex justify-content-between">City <small
                    *ngIf="dashboardForm.controls['city'].dirty && dashboardForm.hasError('required', 'city')"
                    class="text-danger">*City is required</small></label>
                <input type="text" class="form-control border border-success" formControlName="city" id="inputCity"
                  maxlength="100">
              </div>

              <div class="col-md-4"
                [class.error]="dashboardForm.controls['state'].dirty && dashboardForm.hasError('required', 'state')">
                <label for="inputState" class="form-label">State <small
                    *ngIf="dashboardForm.controls['state'].dirty && dashboardForm.hasError('required', 'state')"
                    class="text-danger">*State is required</small></label>
                <select id="inputState" class="form-select border border-success" formControlName="state">
                  <option value="default">----</option>
                  <option *ngFor="let item of states | keyvalue" [value]="item.value">{{item.key}}</option>

                </select>
              </div>

              <div class="col-md-2"
                [class.error]="dashboardForm.controls['zip'].dirty && dashboardForm.hasError('required', 'zip')">
                <label for="inputZip" class="form-label d-flex justify-content-between">Zip <small
                    *ngIf="dashboardForm.controls['zip'].dirty && dashboardForm.hasError('required', 'zip')"
                    class="text-danger">*Zip is required</small></label>
                <input type="number" class="form-control border border-success" formControlName="zip" id="inputZip"
                  minlength="5" maxlength="9">
              </div>

            </form>

            <form class="row g-2 p-2" [formGroup]="dashboardForm" *ngIf="userRequest">
              <div class="col-12 d-flex justify-content-between align-items-center">
                <h1 class="text-decoration-underline">Quote - Request</h1>
                <button (click)="submitRequest()" type="submit" class="btn btn-success">Submit Request</button>
              </div>

              <div class="col-md-3"
                [class.error]="dashboardForm.controls['gallons'].dirty && dashboardForm.hasError('required', 'gallons')">

                <label for="gallonsRequest" class="form-label d-flex justify-content-between ">Gallons <small
                    *ngIf="dashboardForm.controls['gallons'].dirty && dashboardForm.hasError('required', 'gallons')"
                    class="text-danger">*Gallon Amount required</small></label>
                <input type="number" class="form-control border border-success" formControlName="gallons"
                  id="gallonsRequest">
              </div>

              <div class="col-md-9">
                <label for="deliveryAddress" class="form-label">Delivery Address</label>
                <input type="text" formControlName="deliveryAddress" class="form-control" id="deliveryAddress" readonly>
              </div>

              <div class="col-md-4"
                [class.error]="dashboardForm.controls['deliveryDate'].dirty && dashboardForm.hasError('required', 'deliveryDate')">
                <label for="deliveryDate d-flex justify-content-between" class="form-label">Delivery Date <small
                    *ngIf="dashboardForm.controls['deliveryDate'].dirty && dashboardForm.hasError('required', 'deliveryDate')"
                    class="text-danger">*Delivery Date required</small></label>
                <input type="date" class="form-control border border-success" id="deliveryDate"
                  formControlName="deliveryDate">
              </div>

              <div class="col-md-4">
                <label for="suggestedPrice" class="form-label">Suggested Price</label>
                <input type="number" class="form-control" id="suggestedPrice" formControlName="suggestedPrice" readonly>
              </div>

              <div class="col-md-4">
                <label for="totalDue" class="form-label">Total Amount Due</label>
                <input type="number" class="form-control" id="totalDue" formControlName="totalAmountDue" readonly>
              </div>

            </form>

            <div class="d-flex justify-content-start mt-4 p-2" *ngIf="userOrderTable">
              <h1 class="text-decoration-underline">Quote - History</h1>
            </div>
            <input class="form-control mt-0 border border-success" type="text" placeholder="Search Order History"
              [(ngModel)]="searchOrder" *ngIf="userOrderSearch">


            <div class="table-wrapper-scroll-y my-custom-scrollbar">
              <table class="table table-striped table-hover table-bordered" *ngIf="userOrderTable">
                <thead class="thead">
                  <tr>
                    <th scope="col">Order Number</th>
                    <th scope="col">Gallons Requested</th>
                    <th scope="col">Delivery Address</th>
                    <th scope="col">Delivery Date</th>
                    <th scope="col">Price/Gallon</th>
                    <th scope="col">Total Amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let order of orderData | search: searchOrder">
                    <th scope="row">{{order.orderID}}</th>
                    <td>{{order.orderNumber}}</td>
                    <td>{{order.gallonsOrdered}}</td>
                    <td>{{order.deliveryAddress}}</td>
                    <td>{{order.deliveryDate}}</td>
                    <td>${{order.pricePerGallon}}.00</td>
                    <td>${{order.totalAmountDue}}.00</td>
                  </tr> 
                </tbody>
              </table>

            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

</div>